---
import Layout from "../layouts/Layout.astro";

const questions = [
  {
    question:
      "What is the purpose of regression analysis?",
    options: [
      "To manually adjust electrode angles",
      "To model relationships between welding parameters and process outcomes",
      "To increase electrode force manually",
    ],
    correctAnswer:
      "To model relationships between welding parameters and process outcomes",
  },
  {
    question: "Which equation represents a simple linear regression model?",
    options: ["Y = β₀ + β₁X + ε", "Y = X² + ε", "Y = β₀ + ε"],
    correctAnswer: "Y = β₀ + β₁X + ε",
  },
  {
    question:
      "What is the main risk of using polynomial regression in welding data analysis?",
    options: [
      "Underfitting the data",
      "Overfitting the data",
      "Eliminating key variables",
    ],
    correctAnswer: "Overfitting the data",
  },
  {
    question:
      "Which regression technique shrinks some coefficients to zero, aiding feature selection?",
    options: [
      "Simple Linear Regression",
      "Lasso Regression",
      "Ridge Regression",
    ],
    correctAnswer: "Lasso Regression",
  },
  {
    question:
      "What is the role of hyperparameter optimization in regression modeling?",
    options: [
      "To determine the exact electrode force",
      "To fine-tune model settings for better prediction accuracy",
      "To increase travel speed",
    ],
    correctAnswer: "To fine-tune model settings for better prediction accuracy",
  },
  {
    question:
      "What is the benefit of applying regression models to welding data?",
    options: [
      "To visualize electrode color changes",
      "To predict process outcomes and optimize welding parameters",
      "To increase weld time by default",
    ],
    correctAnswer:
      "To predict process outcomes and optimize welding parameters",
  },
  {
    question:
      "What does the R² (coefficient of determination) value indicate in a regression model?",
    options: [
      "The number of independent variables in the model",
      "The proportion of variance in the dependent variable explained by the independent variables",
      "The error term value",
    ],
    correctAnswer:
      "The proportion of variance in the dependent variable explained by the independent variables",
  },
  {
    question:
      "What is a good interpretation of an R² value close to 1 in welding data analysis?",
    options: [
      "The model poorly predicts weld strength",
      "The model accurately explains most of the variance in weld strength",
      "The model contains no independent variables",
    ],
    correctAnswer:
      "The model accurately explains most of the variance in weld strength",
  },
  {
    question: "Which situation might cause an artificially high R² value?",
    options: [
      "Underfitting the model",
      "Including too many unrelated variables in the regression",
      "Using only one independent variable",
    ],
    correctAnswer: "Including too many unrelated variables in the regression",
  },
  {
    question: "Which of the following is a common metric for evaluating the average squared difference between predicted and actual values in a regression model?",
    options: ["Mean Squared Error (MSE)", "R² Value", "Slope (β₁)"],
    correctAnswer: "Mean Squared Error (MSE)",
  },
  {
    question: "What is the advantage of using Root Mean Squared Error (RMSE) over MSE when evaluating regression models?",
    options: [
      "It penalizes errors less heavily",
      "It has the same unit of measurement as the dependent variable",
      "It ignores prediction errors",
    ],
    correctAnswer: "It has the same unit of measurement as the dependent variable",
  },
  {
    question: "Why is it important to evaluate regression models using metrics like MSE, RMSE, and MAE in welding data analysis?",
    options: [
      "To manually select welding parameters",
      "To assess model accuracy and prediction reliability",
      "To increase travel speed by default",
    ],
    correctAnswer: "To assess model accuracy and prediction reliability",
  },
  {
    question: "Which metric measures the average absolute difference between actual and predicted values in a regression model?",
    options: [
      "Mean Absolute Error (MAE)",
      "R² Value",
      "Polynomial Degree",
    ],
    correctAnswer: "Mean Absolute Error (MAE)",
  },
];

---

<Layout>
  <section>
    <h1>Linear Regression Quiz</h1>

    <ol>
      {
        questions.map((question, index) => (
          <li>
            <h3>{question.question}</h3>
            <ol type="a">
              {question.options.map((option, optionIndex) => (
                <li>
                  <input type="radio" name={`q${index + 1}`} value={option} />
                  {option}
                </li>
              ))}
            </ol>
          </li>
        ))
      }
    </ol>

    <button class="alert">Submit Quiz</button>

    <div id="result"></div>
  </section>
</Layout>

<script>
  const questions = [
  {
    question:
      "What is the purpose of regression analysis?",
    options: [
      "To manually adjust electrode angles",
      "To model relationships between welding parameters and process outcomes",
      "To increase electrode force manually",
    ],
    correctAnswer:
      "To model relationships between welding parameters and process outcomes",
  },
  {
    question: "Which equation represents a simple linear regression model?",
    options: ["Y = β₀ + β₁X + ε", "Y = X² + ε", "Y = β₀ + ε"],
    correctAnswer: "Y = β₀ + β₁X + ε",
  },
  {
    question:
      "What is the main risk of using polynomial regression in welding data analysis?",
    options: [
      "Underfitting the data",
      "Overfitting the data",
      "Eliminating key variables",
    ],
    correctAnswer: "Overfitting the data",
  },
  {
    question:
      "Which regression technique shrinks some coefficients to zero, aiding feature selection?",
    options: [
      "Simple Linear Regression",
      "Lasso Regression",
      "Ridge Regression",
    ],
    correctAnswer: "Lasso Regression",
  },
  {
    question:
      "What is the role of hyperparameter optimization in regression modeling?",
    options: [
      "To determine the exact electrode force",
      "To fine-tune model settings for better prediction accuracy",
      "To increase travel speed",
    ],
    correctAnswer: "To fine-tune model settings for better prediction accuracy",
  },
  {
    question:
      "What is the benefit of applying regression models to welding data?",
    options: [
      "To visualize electrode color changes",
      "To predict process outcomes and optimize welding parameters",
      "To increase weld time by default",
    ],
    correctAnswer:
      "To predict process outcomes and optimize welding parameters",
  },
  {
    question:
      "What does the R² (coefficient of determination) value indicate in a regression model?",
    options: [
      "The number of independent variables in the model",
      "The proportion of variance in the dependent variable explained by the independent variables",
      "The error term value",
    ],
    correctAnswer:
      "The proportion of variance in the dependent variable explained by the independent variables",
  },
  {
    question:
      "What is a good interpretation of an R² value close to 1 in welding data analysis?",
    options: [
      "The model poorly predicts weld strength",
      "The model accurately explains most of the variance in weld strength",
      "The model contains no independent variables",
    ],
    correctAnswer:
      "The model accurately explains most of the variance in weld strength",
  },
  {
    question: "Which situation might cause an artificially high R² value?",
    options: [
      "Underfitting the model",
      "Including too many unrelated variables in the regression",
      "Using only one independent variable",
    ],
    correctAnswer: "Including too many unrelated variables in the regression",
  },
  {
    question: "Which of the following is a common metric for evaluating the average squared difference between predicted and actual values in a regression model?",
    options: ["Mean Squared Error (MSE)", "R² Value", "Slope (β₁)"],
    correctAnswer: "Mean Squared Error (MSE)",
  },
  {
    question: "What is the advantage of using Root Mean Squared Error (RMSE) over MSE when evaluating regression models?",
    options: [
      "It penalizes errors less heavily",
      "It has the same unit of measurement as the dependent variable",
      "It ignores prediction errors",
    ],
    correctAnswer: "It has the same unit of measurement as the dependent variable",
  },
  {
    question: "Why is it important to evaluate regression models using metrics like MSE, RMSE, and MAE in welding data analysis?",
    options: [
      "To manually select welding parameters",
      "To assess model accuracy and prediction reliability",
      "To increase travel speed by default",
    ],
    correctAnswer: "To assess model accuracy and prediction reliability",
  },
  {
    question: "Which metric measures the average absolute difference between actual and predicted values in a regression model?",
    options: [
      "Mean Absolute Error (MAE)",
      "R² Value",
      "Polynomial Degree",
    ],
    correctAnswer: "Mean Absolute Error (MAE)",
  },
];


  document.addEventListener("DOMContentLoaded", () => {
    const submitButton =
      document.querySelector<HTMLButtonElement>("button.alert");
    const quizContainer = document.querySelector("ol"); // Quiz container
    const resultDiv = document.getElementById("result");

    if (submitButton && quizContainer && resultDiv) {
      submitButton.addEventListener("click", () => {
        let score = 0;
        let allAnswered = true;
        const feedback: any[] = [];

        questions.forEach((question, index) => {
          const selectedOption = document.querySelector<HTMLInputElement>(
            `input[name="q${index + 1}"]:checked`
          );

          // Check if all questions are answered
          if (!selectedOption) {
            allAnswered = false;
          }

          if (
            selectedOption &&
            selectedOption.value === question.correctAnswer
          ) {
            score++;
          } else {
            feedback.push({
              question: question.question,
              selectedAnswer: selectedOption
                ? selectedOption.value
                : "No answer",
              correctAnswer: question.correctAnswer,
            });
          }
        });

        if (!allAnswered) {
          alert("Please answer all questions before submitting the quiz.");
          return; // Stop the quiz from submitting
        }

        // Replace the quiz content with the result
        let feedbackHTML = feedback
          .map(
            (item) => `
            <li>
              <h3>${item.question}</h3>
              <p style="color: red; font-weight: bold;">Your Answer: <strong>${item.selectedAnswer}</strong></p>
              <p style="color: green; font-weight: bold;">Correct Answer: <strong>${item.correctAnswer}</strong></p>
            </li>
          `
          )
          .join("");

        quizContainer.innerHTML = `
        <div class="card">
          <h2>Quiz Completed!</h2>
          <p>You scored <strong>${score}</strong> out of <strong>${questions.length}</strong>.</p>
          <h3>Review of Incorrect Answers:</h3>
          <ol>${feedbackHTML}</ol>
          <p>Thank you for participating in the Introduction to AI Quiz!</p>
          <a href="/quizzes" class="home" style="
            display: block;
            width: 20%;
            margin: 2rem auto;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            color: #fff;
            background: linear-gradient(135deg, #3245ff, #bc52ee);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease-in-out;">
            Get Back to the Quizzes
          </a>
        </div>
      `;

        // Append Leaderboard dynamically
        resultDiv.innerHTML = "<Leaderboard />";

        resultDiv.textContent = "";
        submitButton.remove(); // Hide the button after submission
      });
    } else {
      console.error("Submit button or quiz container is missing in the DOM.");
    }
  });
</script>

<style>
  /* General Styles */
  body {
    font-family: Arial, sans-serif;
    line-height: 1.6;
    margin: 0;
    padding: 0;
    background-color: #f8f9fa;
    color: #333;
  }

  h1 {
    text-align: center;
    margin-top: 2rem;
    color: #3245ff;
    font-size: 2.5rem;
  }

  ol {
    max-width: 800px;
    margin: 2rem auto;
    padding: 0;
    list-style: none;
  }

  li {
    margin-bottom: 1.5rem;
  }

  li h3 {
    font-size: 1.2rem;
    margin-bottom: 0.5rem;
    color: #3245ff;
  }

  li ol {
    list-style-type: lower-alpha;
    padding-left: 1.5rem;
  }

  li ol li {
    margin-bottom: 0.5rem;
  }

  input[type="radio"] {
    margin-right: 0.5rem;
  }

  /* Button Styles */
  button.alert {
    display: block;
    width: 200px;
    margin: 2rem auto;
    padding: 0.75rem 1rem;
    font-size: 1rem;
    color: #fff;
    background: linear-gradient(135deg, #3245ff, #bc52ee);
    border: none;
    border-radius: 5px;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease-in-out;
  }

  button.alert:hover {
    background: linear-gradient(135deg, #1f3bff, #a742db);
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
    transform: translateY(-2px);
  }

  /* Result Box */
  #result {
    text-align: center;
    font-size: 1.2rem;
    color: #28a745;
    margin-top: 2rem;
  }

  /* Card Style */
  .card {
    background-color: #fff;
    border-radius: 10px;
    padding: 1.5rem;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    margin: 1.5rem auto;
    max-width: 800px;
  }
</style>
