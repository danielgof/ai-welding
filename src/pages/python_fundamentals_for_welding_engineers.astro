---
import Layout from "../layouts/Layout.astro";

const questions = [
  {
    question: "What is Python?",
    options: [
      "A low-level programming language",
      "A high-level, interpreted programming language known for its simplicity and versatility",
      "A type of welding technique",
    ],
    correctAnswer:
      "A high-level, interpreted programming language known for its simplicity and versatility",
  },
  {
    question:
      "Which of the following is NOT an application of Python in welding engineering?",
    options: [
      "Data analysis for process optimization",
      "Automation of welding simulations",
      "Manual electrode handling",
    ],
    correctAnswer: "Manual electrode handling",
  },
  {
    question: "What is Google Colab?",
    options: [
      "A cloud-based Jupyter notebook environment provided by Google",
      "A Python compiler",
      "A welding simulation tool",
    ],
    correctAnswer:
      "A cloud-based Jupyter notebook environment provided by Google",
  },
  {
    question: "Which Python data type is used to store decimal numbers?",
    options: ["int", "float", "str"],
    correctAnswer: "float",
  },
  {
    question:
      "Which Python control flow statement is used for conditional execution?",
    options: ["for loop", "if-else", "while loop"],
    correctAnswer: "if-else",
  },
  {
    question:
      "Which Python data structure is best for storing key-value pairs?",
    options: ["List", "Tuple", "Dictionary"],
    correctAnswer: "Dictionary",
  },
  {
    question:
      "Which Python library is commonly used for data manipulation in welding research?",
    options: ["NumPy", "Pandas", "Matplotlib"],
    correctAnswer: "Pandas",
  },
  {
    question: "What is the purpose of the NumPy library in Python?",
    options: [
      "Data visualization",
      "Numerical computing with arrays",
      "Web development",
    ],
    correctAnswer: "Numerical computing with arrays",
  },
  {
    question: "Which function keyword is used to define a function in Python?",
    options: ["func", "define", "def"],
    correctAnswer: "def",
  },
  {
    question:
      "Which of the following is an example of using Pandas to read a CSV file?",
    options: [
      "import pandas as pd; df = pd.read_csv('welding_data.csv')",
      "df.read_csv('welding_data.csv')",
      "open('welding_data.csv')",
    ],
    correctAnswer: "import pandas as pd; df = pd.read_csv('welding_data.csv')",
  },
  {
    question:
      "What are the advantages of using Python for welding simulations?",
    options: [
      "Ease of automation",
      "Integration with machine learning",
      "Both A and B",
    ],
    correctAnswer: "Both A and B",
  },
  {
    question: "Which library is best suited for data visualization in Python?",
    options: ["Matplotlib", "Pandas", "NumPy"],
    correctAnswer: "Matplotlib",
  },
  {
    question: "How does Python help in defect detection in welding?",
    options: [
      "By using machine learning models",
      "By manual inspection",
      "By increasing welding speed",
    ],
    correctAnswer: "By using machine learning models",
  },
  {
    question:
      "What is the key feature of Google Colab that benefits welding engineers?",
    options: [
      "Free access to GPUs and TPUs",
      "Built-in welding simulation tools",
      "Local storage only",
    ],
    correctAnswer: "Free access to GPUs and TPUs",
  },
  {
    question:
      "Which data structure is most efficient for storing welding parameters with labeled keys?",
    options: ["List", "Set", "Dictionary"],
    correctAnswer: "Dictionary",
  },
];
---

<Layout>
  <section>
    <h1>Python Fundumentals Quiz</h1>

    <ol>
      {
        questions.map((question, index) => (
          <li>
            <h3>{question.question}</h3>
            <ol type="a">
              {question.options.map((option, optionIndex) => (
                <li>
                  <input type="radio" name={`q${index + 1}`} value={option} />
                  {option}
                </li>
              ))}
            </ol>
          </li>
        ))
      }
    </ol>

    <button class="alert">Submit Quiz</button>

    <div id="result"></div>
  </section>
</Layout>

<script>
  const questions = [
    {
      question: "What is Python?",
      options: [
        "A low-level programming language",
        "A high-level, interpreted programming language known for its simplicity and versatility",
        "A type of welding technique",
      ],
      correctAnswer:
        "A high-level, interpreted programming language known for its simplicity and versatility",
    },
    {
      question:
        "Which of the following is NOT an application of Python in welding engineering?",
      options: [
        "Data analysis for process optimization",
        "Automation of welding simulations",
        "Manual electrode handling",
      ],
      correctAnswer: "Manual electrode handling",
    },
    {
      question: "What is Google Colab?",
      options: [
        "A cloud-based Jupyter notebook environment provided by Google",
        "A Python compiler",
        "A welding simulation tool",
      ],
      correctAnswer:
        "A cloud-based Jupyter notebook environment provided by Google",
    },
    {
      question: "Which Python data type is used to store decimal numbers?",
      options: ["int", "float", "str"],
      correctAnswer: "float",
    },
    {
      question:
        "Which Python control flow statement is used for conditional execution?",
      options: ["for loop", "if-else", "while loop"],
      correctAnswer: "if-else",
    },
    {
      question:
        "Which Python data structure is best for storing key-value pairs?",
      options: ["List", "Tuple", "Dictionary"],
      correctAnswer: "Dictionary",
    },
    {
      question:
        "Which Python library is commonly used for data manipulation in welding research?",
      options: ["NumPy", "Pandas", "Matplotlib"],
      correctAnswer: "Pandas",
    },
    {
      question: "What is the purpose of the NumPy library in Python?",
      options: [
        "Data visualization",
        "Numerical computing with arrays",
        "Web development",
      ],
      correctAnswer: "Numerical computing with arrays",
    },
    {
      question:
        "Which function keyword is used to define a function in Python?",
      options: ["func", "define", "def"],
      correctAnswer: "def",
    },
    {
      question:
        "Which of the following is an example of using Pandas to read a CSV file?",
      options: [
        "import pandas as pd; df = pd.read_csv('welding_data.csv')",
        "df.read_csv('welding_data.csv')",
        "open('welding_data.csv')",
      ],
      correctAnswer:
        "import pandas as pd; df = pd.read_csv('welding_data.csv')",
    },
    {
      question:
        "What are the advantages of using Python for welding simulations?",
      options: [
        "Ease of automation",
        "Integration with machine learning",
        "Both A and B",
      ],
      correctAnswer: "Both A and B",
    },
    {
      question:
        "Which library is best suited for data visualization in Python?",
      options: ["Matplotlib", "Pandas", "NumPy"],
      correctAnswer: "Matplotlib",
    },
    {
      question: "How does Python help in defect detection in welding?",
      options: [
        "By using machine learning models",
        "By manual inspection",
        "By increasing welding speed",
      ],
      correctAnswer: "By using machine learning models",
    },
    {
      question:
        "What is the key feature of Google Colab that benefits welding engineers?",
      options: [
        "Free access to GPUs and TPUs",
        "Built-in welding simulation tools",
        "Local storage only",
      ],
      correctAnswer: "Free access to GPUs and TPUs",
    },
    {
      question:
        "Which data structure is most efficient for storing welding parameters with labeled keys?",
      options: ["List", "Set", "Dictionary"],
      correctAnswer: "Dictionary",
    },
  ];

  document.addEventListener("DOMContentLoaded", () => {
    const submitButton =
      document.querySelector<HTMLButtonElement>("button.alert");
    const quizContainer = document.querySelector("ol"); // Quiz container
    const resultDiv = document.getElementById("result");

    if (submitButton && quizContainer && resultDiv) {
      submitButton.addEventListener("click", () => {
        let score = 0;
        let allAnswered = true;
        const feedback: any[] = [];

        questions.forEach((question, index) => {
          const selectedOption = document.querySelector<HTMLInputElement>(
            `input[name="q${index + 1}"]:checked`
          );

          // Check if all questions are answered
          if (!selectedOption) {
            allAnswered = false;
          }

          if (
            selectedOption &&
            selectedOption.value === question.correctAnswer
          ) {
            score++;
          } else {
            feedback.push({
              question: question.question,
              selectedAnswer: selectedOption
                ? selectedOption.value
                : "No answer",
              correctAnswer: question.correctAnswer,
            });
          }
        });

        if (!allAnswered) {
          alert("Please answer all questions before submitting the quiz.");
          return; // Stop the quiz from submitting
        }

        // Replace the quiz content with the result
        let feedbackHTML = feedback
          .map(
            (item) => `
            <li>
              <h3>${item.question}</h3>
              <p style="color: red; font-weight: bold;">Your Answer: <strong>${item.selectedAnswer}</strong></p>
              <p style="color: green; font-weight: bold;">Correct Answer: <strong>${item.correctAnswer}</strong></p>
            </li>
          `
          )
          .join("");

        quizContainer.innerHTML = `
        <div class="card">
          <h2>Quiz Completed!</h2>
          <p>You scored <strong>${score}</strong> out of <strong>${questions.length}</strong>.</p>
          <h3>Review of Incorrect Answers:</h3>
          <ol>${feedbackHTML}</ol>
          <p>Thank you for participating in the Introduction to AI Quiz!</p>
          <a href="/ai-welding/quizzes" class="home" style="
            display: block;
            width: 20%;
            margin: 2rem auto;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            color: #fff;
            background: linear-gradient(135deg, #3245ff, #bc52ee);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease-in-out;">
            Get Back to the Quizzes
          </a>
        </div>
      `;

        // Append Leaderboard dynamically
        resultDiv.innerHTML = "<Leaderboard />";

        resultDiv.textContent = "";
        submitButton.remove(); // Hide the button after submission
      });
    } else {
      console.error("Submit button or quiz container is missing in the DOM.");
    }
  });
</script>

<style>
  /* General Styles */
  body {
    font-family: Arial, sans-serif;
    line-height: 1.6;
    margin: 0;
    padding: 0;
    background-color: #f8f9fa;
    color: #333;
  }

  h1 {
    text-align: center;
    margin-top: 2rem;
    color: #3245ff;
    font-size: 2.5rem;
  }

  ol {
    max-width: 800px;
    margin: 2rem auto;
    padding: 0;
    list-style: none;
  }

  li {
    margin-bottom: 1.5rem;
  }

  li h3 {
    font-size: 1.2rem;
    margin-bottom: 0.5rem;
    color: #3245ff;
  }

  li ol {
    list-style-type: lower-alpha;
    padding-left: 1.5rem;
  }

  li ol li {
    margin-bottom: 0.5rem;
  }

  input[type="radio"] {
    margin-right: 0.5rem;
  }

  /* Button Styles */
  button.alert {
    display: block;
    width: 200px;
    margin: 2rem auto;
    padding: 0.75rem 1rem;
    font-size: 1rem;
    color: #fff;
    background: linear-gradient(135deg, #3245ff, #bc52ee);
    border: none;
    border-radius: 5px;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease-in-out;
  }

  button.alert:hover {
    background: linear-gradient(135deg, #1f3bff, #a742db);
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
    transform: translateY(-2px);
  }

  /* Result Box */
  #result {
    text-align: center;
    font-size: 1.2rem;
    color: #28a745;
    margin-top: 2rem;
  }

  /* Card Style */
  .card {
    background-color: #fff;
    border-radius: 10px;
    padding: 1.5rem;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    margin: 1.5rem auto;
    max-width: 800px;
  }
</style>
